<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>X-FREE KEY GEN</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      font-family: 'Poppins', sans-serif;
      background: linear-gradient(135deg, #0f0f0f 0%, #1a1a1a 100%);
      min-height: 100vh;
    }

    .glow-card {
      background: linear-gradient(145deg, #1e1e1e, #252525);
      border: 1px solid #333;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
      transition: all 0.3s ease;
    }

    .glow-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 12px 48px rgba(255, 102, 0, 0.2);
    }

    .btn-generate {
      background: linear-gradient(135deg, #ff6600 0%, #ff8833 100%);
      transition: all 0.3s ease;
    }

    .btn-generate:hover {
      transform: scale(1.05);
      box-shadow: 0 8px 24px rgba(255, 102, 0, 0.4);
    }

    .btn-generate:active {
      transform: scale(0.98);
    }

    .key-list-item {
      background: #1a1a1a;
      border-left: 3px solid #ff6600;
      padding: 12px;
      margin: 8px 0;
      border-radius: 5px;
      transition: all 0.2s ease;
    }

    .key-list-item:hover {
      background: #222;
      transform: translateX(5px);
    }

    .pulse-dot {
      animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
    }

    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }

    .code-block {
      background: #0d1117;
      border: 1px solid #30363d;
      border-radius: 8px;
      padding: 16px;
      font-family: 'Courier New', monospace;
      font-size: 14px;
      color: #c9d1d9;
      overflow-x: auto;
    }
  </style>
</head>

<body class="text-white">
  <!-- Header -->
  <nav class="bg-[#1a1a1a] border-b border-[#333] py-4 px-6 md:px-20">
    <div class="flex justify-between items-center">
      <div class="flex items-center space-x-3">
        <img src="https://cdn.discordapp.com/attachments/1385041743111782490/1434508499454529646/New_Project.png?ex=6917bee6&is=69166d66&hm=77fcdfbb5b37d06c5566d404c1cf81ae715f23854c13d36dc33d7fedb5760df3&" alt="Logo" class="w-10 h-10 rounded-lg">
        <div>
          <h1 class="text-2xl font-bold text-white">X-FREE KEY GEN</h1>
          <p class="text-xs text-gray-400">Secure Key Generation & GitHub Auto-Sync</p>
        </div>
      </div>
      <div class="flex items-center space-x-3">
        <span class="pulse-dot w-3 h-3 bg-green-500 rounded-full"></span>
        <span class="text-sm text-gray-400" id="systemStatus">System Active</span>
      </div>
    </div>
  </nav>

  <!-- Main Content -->
  <main class="container mx-auto px-4 py-8 max-w-6xl">
    
    <!-- GitHub Setup Section -->
    <div class="glow-card rounded-2xl p-8 mb-8" id="setupSection">
      <h2 class="text-3xl font-bold mb-2 text-center">‚öôÔ∏è GitHub Setup</h2>
      <p class="text-gray-400 text-center mb-6">Configure once, then generate unlimited keys with auto-sync!</p>
      
      <div class="max-w-2xl mx-auto">
        <div class="mb-4">
          <label class="block text-sm font-medium mb-2 text-gray-300">GitHub Personal Access Token:</label>
          <input 
            type="password" 
            id="githubToken" 
            placeholder="ghp_xxxxxxxxxxxxxxxxxxxx"
            class="w-full px-4 py-3 bg-[#0a0a0a] border border-[#333] rounded-lg text-white focus:outline-none focus:border-[#ff6600] transition"
          />
          <p class="text-xs text-gray-500 mt-1">Create at: GitHub Settings ‚Üí Developer settings ‚Üí Personal access tokens</p>
        </div>

        <div class="mb-4">
          <label class="block text-sm font-medium mb-2 text-gray-300">Repository (username/repo):</label>
          <input 
            type="text" 
            id="githubRepo" 
            placeholder="yourusername/xfree-keys"
            class="w-full px-4 py-3 bg-[#0a0a0a] border border-[#333] rounded-lg text-white focus:outline-none focus:border-[#ff6600] transition"
          />
        </div>

        <div class="mb-6">
          <label class="block text-sm font-medium mb-2 text-gray-300">File Path:</label>
          <input 
            type="text" 
            id="githubFilePath" 
            value="keys.txt"
            class="w-full px-4 py-3 bg-[#0a0a0a] border border-[#333] rounded-lg text-white focus:outline-none focus:border-[#ff6600] transition"
          />
        </div>

        <div class="flex gap-3">
          <button onclick="saveGitHubConfig()" class="flex-1 py-3 bg-green-600 hover:bg-green-700 rounded-lg text-white font-medium transition">
            üíæ Save Configuration
          </button>
          <button onclick="testGitHubConnection()" class="flex-1 py-3 bg-blue-600 hover:bg-blue-700 rounded-lg text-white font-medium transition">
            üîå Test Connection
          </button>
        </div>

        <div id="connectionStatus" class="mt-4 p-3 rounded-lg text-center hidden"></div>
      </div>
    </div>

    <!-- Key Generator Section -->
    <div class="glow-card rounded-2xl p-8 mb-8" id="generatorSection" style="display: none;">
      <h2 class="text-3xl font-bold mb-2 text-center">üîë Generate Keys</h2>
      <p class="text-gray-400 text-center mb-6">Create unlimited authentication keys - auto-syncs to GitHub!</p>
      
      <div class="max-w-2xl mx-auto">
        <!-- Quick Generate Buttons -->
        <div class="grid grid-cols-3 md:grid-cols-6 gap-3 mb-6">
          <button onclick="generateKeys(1)" class="btn-generate py-3 rounded-lg text-white font-bold">1</button>
          <button onclick="generateKeys(5)" class="btn-generate py-3 rounded-lg text-white font-bold">5</button>
          <button onclick="generateKeys(10)" class="btn-generate py-3 rounded-lg text-white font-bold">10</button>
          <button onclick="generateKeys(25)" class="btn-generate py-3 rounded-lg text-white font-bold">25</button>
          <button onclick="generateKeys(50)" class="btn-generate py-3 rounded-lg text-white font-bold">50</button>
          <button onclick="generateKeys(100)" class="btn-generate py-3 rounded-lg text-white font-bold">100</button>
        </div>

        <!-- Custom Amount -->
        <div class="flex gap-3 mb-4">
          <input 
            type="number" 
            id="customAmount" 
            placeholder="Custom amount"
            min="1"
            max="10000"
            value="10"
            class="flex-1 px-4 py-3 bg-[#0a0a0a] border border-[#333] rounded-lg text-white focus:outline-none focus:border-[#ff6600] transition"
          />
          <button onclick="generateCustom()" class="px-8 py-3 bg-green-600 hover:bg-green-700 rounded-lg text-white font-medium transition">
            Generate Custom
          </button>
        </div>

        <button onclick="syncToGitHub()" class="w-full py-3 bg-blue-600 hover:bg-blue-700 rounded-lg text-white font-medium transition">
          üîÑ Sync to GitHub Now
        </button>
      </div>
    </div>

    <!-- Stats Section -->
    <div class="grid grid-cols-2 md:grid-cols-3 gap-4 mb-8" id="statsSection" style="display: none;">
      <div class="glow-card rounded-xl p-6 text-center">
        <div class="text-4xl font-bold text-[#ff6600]" id="totalKeys">0</div>
        <div class="text-sm text-gray-400 mt-2">Total Keys</div>
      </div>
      <div class="glow-card rounded-xl p-6 text-center">
        <div class="text-4xl font-bold text-green-500" id="activeKeys">0</div>
        <div class="text-sm text-gray-400 mt-2">Active Keys</div>
      </div>
      <div class="glow-card rounded-xl p-6 text-center">
        <div class="text-4xl font-bold text-blue-500" id="syncStatus">‚è≥</div>
        <div class="text-sm text-gray-400 mt-2">Last Sync</div>
      </div>
    </div>

    <!-- GitHub URL Section -->
    <div class="glow-card rounded-2xl p-8 mb-8" id="urlSection" style="display: none;">
      <h2 class="text-2xl font-bold mb-4">üîó Your GitHub Raw URL</h2>
      <p class="text-gray-400 mb-3">Use this URL in your Roblox script's authentication:</p>
      <div class="bg-[#0a0a0a] border-2 border-[#ff6600] p-4 rounded-lg font-mono text-[#ff6600] break-all mb-4" id="githubRawUrl">
        Configure GitHub first
      </div>
      <button onclick="copyGitHubUrl()" class="w-full py-3 bg-[#ff6600] hover:bg-[#ff8833] rounded-lg text-white font-bold transition">
        üìã Copy GitHub URL
      </button>
    </div>

    <!-- Generated Keys List -->
    <div class="glow-card rounded-2xl p-8 mb-8" id="keysSection" style="display: none;">
      <div class="flex justify-between items-center mb-4">
        <h2 class="text-2xl font-bold">üìú Active Keys (<span id="keyCount2">0</span>)</h2>
        <div class="flex gap-2">
          <button onclick="copyAllKeys()" class="px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-lg text-white text-sm font-medium transition">
            üìã Copy All
          </button>
          <button onclick="exportKeys()" class="px-4 py-2 bg-green-600 hover:bg-green-700 rounded-lg text-white text-sm font-medium transition">
            üíæ Export
          </button>
          <button onclick="clearAllKeys()" class="px-4 py-2 bg-red-600 hover:bg-red-700 rounded-lg text-white text-sm font-medium transition">
            üóëÔ∏è Clear All
          </button>
        </div>
      </div>
      <div id="keysList" class="max-h-96 overflow-y-auto">
        <p class="text-gray-500 text-center py-8">No keys generated yet</p>
      </div>
    </div>



  </main>

  <!-- Footer -->
  <footer class="text-center py-6 text-sm text-gray-500 border-t border-[#333] mt-12">
    ¬© 2025 X-FREE KEY GEN. Secure authentication for your Roblox scripts.
  </footer>

  <script>
    let keys = new Set();
    let totalGenerated = 0;
    let config = {
      token: '',
      repo: '',
      filePath: 'keys.txt',
      sha: ''
    };

    function init() {
      loadConfig();
      loadKeys();
      updateDisplay();
      checkSetupComplete();
    }

    function loadConfig() {
      const saved = localStorage.getItem('github_config');
      if (saved) {
        config = JSON.parse(saved);
        document.getElementById('githubToken').value = config.token;
        document.getElementById('githubRepo').value = config.repo;
        document.getElementById('githubFilePath').value = config.filePath;
      }
    }

    function saveConfig() {
      localStorage.setItem('github_config', JSON.stringify(config));
    }

    function loadKeys() {
      const saved = localStorage.getItem('xfree_keys');
      const savedTotal = localStorage.getItem('xfree_total');
      if (saved) {
        keys = new Set(JSON.parse(saved));
      }
      if (savedTotal) {
        totalGenerated = parseInt(savedTotal);
      }
    }

    function saveKeys() {
      localStorage.setItem('xfree_keys', JSON.stringify([...keys]));
      localStorage.setItem('xfree_total', totalGenerated.toString());
    }

    function saveGitHubConfig() {
      const token = document.getElementById('githubToken').value.trim();
      const repo = document.getElementById('githubRepo').value.trim();
      const filePath = document.getElementById('githubFilePath').value.trim();

      if (!token || !repo || !filePath) {
        showNotification('Please fill in all fields', 'error');
        return;
      }

      config.token = token;
      config.repo = repo;
      config.filePath = filePath;
      saveConfig();

      showNotification('Configuration saved! Click "Test Connection" to verify.', 'success');
      checkSetupComplete();
    }

    async function testGitHubConnection() {
      if (!config.token || !config.repo) {
        showNotification('Please save configuration first', 'error');
        return;
      }

      const statusDiv = document.getElementById('connectionStatus');
      statusDiv.className = 'mt-4 p-3 rounded-lg text-center bg-blue-500 bg-opacity-20 text-blue-400';
      statusDiv.textContent = 'Testing connection...';
      statusDiv.classList.remove('hidden');

      try {
        const response = await fetch(`https://api.github.com/repos/${config.repo}`, {
          headers: {
            'Authorization': `token ${config.token}`,
            'Accept': 'application/vnd.github.v3+json'
          }
        });

        if (response.ok) {
          statusDiv.className = 'mt-4 p-3 rounded-lg text-center bg-green-500 bg-opacity-20 text-green-400';
          statusDiv.textContent = '‚úÖ Connection successful!';
          document.getElementById('systemStatus').textContent = 'GitHub Connected';
          showNotification('‚úÖ Connection successful!', 'success');
          checkSetupComplete();
        } else {
          statusDiv.className = 'mt-4 p-3 rounded-lg text-center bg-red-500 bg-opacity-20 text-red-400';
          statusDiv.textContent = '‚ùå Connection failed. Check your token and repository.';
          showNotification('‚ùå Connection failed', 'error');
        }
      } catch (error) {
        statusDiv.className = 'mt-4 p-3 rounded-lg text-center bg-red-500 bg-opacity-20 text-red-400';
        statusDiv.textContent = '‚ùå Error: ' + error.message;
        showNotification('‚ùå Connection error', 'error');
      }
    }

    function checkSetupComplete() {
      if (config.token && config.repo && config.filePath) {
        document.getElementById('generatorSection').style.display = 'block';
        document.getElementById('statsSection').style.display = 'grid';
        document.getElementById('urlSection').style.display = 'block';
        document.getElementById('keysSection').style.display = 'block';
        updateGitHubUrl();
      }
    }

    function updateGitHubUrl() {
      const url = `https://raw.githubusercontent.com/${config.repo}/main/${config.filePath}`;
      document.getElementById('githubRawUrl').textContent = url;
    }

    function copyGitHubUrl() {
      const url = `https://raw.githubusercontent.com/${config.repo}/main/${config.filePath}`;
      navigator.clipboard.writeText(url).then(() => {
        showNotification('GitHub URL copied! Paste it into your Roblox script.', 'success');
      });
    }

    function generateRandomKey() {
      const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
      const segments = [];
      for (let i = 0; i < 4; i++) {
        let segment = '';
        for (let j = 0; j < 4; j++) {
          segment += chars[Math.floor(Math.random() * chars.length)];
        }
        segments.push(segment);
      }
      return 'XFREE-' + segments.join('-');
    }

    async function generateKeys(count) {
      const startSize = keys.size;
      for (let i = 0; i < count; i++) {
        let newKey = generateRandomKey();
        while (keys.has(newKey)) {
          newKey = generateRandomKey();
        }
        keys.add(newKey);
      }
      const newKeys = keys.size - startSize;
      totalGenerated += newKeys;
      saveKeys();
      updateDisplay();
      showNotification(`Generated ${newKeys} new keys (Total: ${keys.size}). Syncing to GitHub...`, 'success');
      await syncToGitHub();
    }

    async function generateCustom() {
      const count = parseInt(document.getElementById('customAmount').value);
      if (isNaN(count) || count < 1) {
        showNotification('Please enter a valid number', 'error');
        return;
      }
      await generateKeys(count);
    }

    async function syncToGitHub() {
      if (!config.token || !config.repo) {
        showNotification('Please configure GitHub first', 'error');
        return;
      }

      if (keys.size === 0) {
        const content = '';
        const encodedContent = btoa(content);
        
        try {
          let currentSha = '';
          const getResponse = await fetch(`https://api.github.com/repos/${config.repo}/contents/${config.filePath}`, {
            headers: {
              'Authorization': `token ${config.token}`,
              'Accept': 'application/vnd.github.v3+json'
            }
          });

          if (getResponse.ok) {
            const fileData = await getResponse.json();
            currentSha = fileData.sha;
          } else {
            showNotification('No file to sync (empty keys)', 'error');
            return;
          }

          const body = {
            message: `Clear all keys`,
            content: encodedContent,
            branch: 'main',
            sha: currentSha
          };

          const response = await fetch(`https://api.github.com/repos/${config.repo}/contents/${config.filePath}`, {
            method: 'PUT',
            headers: {
              'Authorization': `token ${config.token}`,
              'Accept': 'application/vnd.github.v3+json',
              'Content-Type': 'application/json'
            },
            body: JSON.stringify(body)
          });

          if (response.ok) {
            const data = await response.json();
            config.sha = data.content.sha;
            saveConfig();
            showNotification('‚úÖ All keys cleared from GitHub!', 'success');
            document.getElementById('syncStatus').textContent = '‚úÖ';
          } else {
            const error = await response.json();
            showNotification('‚ùå Sync failed: ' + (error.message || 'Unknown error'), 'error');
          }
        } catch (error) {
          showNotification('‚ùå Sync error: ' + error.message, 'error');
        }
        return;
      }

      const keysArray = Array.from(keys);
      const content = keysArray.join('\n');
      console.log('Syncing keys to GitHub:', keysArray.length, 'keys');
      const encodedContent = btoa(content);

      try {
        let fileExists = false;
        let currentSha = '';

        const getResponse = await fetch(`https://api.github.com/repos/${config.repo}/contents/${config.filePath}`, {
          headers: {
            'Authorization': `token ${config.token}`,
            'Accept': 'application/vnd.github.v3+json'
          }
        });

        if (getResponse.ok) {
          const fileData = await getResponse.json();
          currentSha = fileData.sha;
          fileExists = true;
        }

        const body = {
          message: `Update keys: ${keys.size} total keys`,
          content: encodedContent,
          branch: 'main'
        };

        if (fileExists) {
          body.sha = currentSha;
        }

        const response = await fetch(`https://api.github.com/repos/${config.repo}/contents/${config.filePath}`, {
          method: 'PUT',
          headers: {
            'Authorization': `token ${config.token}`,
            'Accept': 'application/vnd.github.v3+json',
            'Content-Type': 'application/json'
          },
          body: JSON.stringify(body)
        });

        if (response.ok) {
          const data = await response.json();
          config.sha = data.content.sha;
          saveConfig();
          showNotification(`‚úÖ ${keys.size} keys synced to GitHub successfully!`, 'success');
          document.getElementById('syncStatus').textContent = '‚úÖ';
          updateGitHubUrl();
          console.log('Sync successful! Keys in GitHub:', keys.size);
        } else {
          const error = await response.json();
          showNotification('‚ùå Sync failed: ' + (error.message || 'Unknown error'), 'error');
        }
      } catch (error) {
        showNotification('‚ùå Sync error: ' + error.message, 'error');
      }
    }

    async function deleteKey(key) {
      keys.delete(key);
      saveKeys();
      updateDisplay();
      showNotification('Key deleted. Syncing to GitHub...', 'success');
      await syncToGitHub();
    }

    function copyKey(key) {
      navigator.clipboard.writeText(key).then(() => {
        showNotification('Key copied!', 'success');
      });
    }

    function copyAllKeys() {
      if (keys.size === 0) {
        showNotification('No keys to copy', 'error');
        return;
      }
      navigator.clipboard.writeText([...keys].join('\n')).then(() => {
        showNotification(`Copied ${keys.size} keys!`, 'success');
      });
    }

    function exportKeys() {
      if (keys.size === 0) {
        showNotification('No keys to export', 'error');
        return;
      }
      const blob = new Blob([[...keys].join('\n')], { type: 'text/plain' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = `xfree-keys-${new Date().toISOString().split('T')[0]}.txt`;
      a.click();
      showNotification('Keys exported!', 'success');
    }

    async function clearAllKeys() {
      if (keys.size === 0) {
        showNotification('No keys to clear', 'error');
        return;
      }
      if (confirm(`Delete all ${keys.size} keys? This will sync to GitHub immediately.`)) {
        keys.clear();
        saveKeys();
        updateDisplay();
        showNotification('Clearing all keys and syncing to GitHub...', 'success');
        await syncToGitHub();
      }
    }

    function updateDisplay() {
      document.getElementById('totalKeys').textContent = keys.size;
      document.getElementById('activeKeys').textContent = keys.size;
      document.getElementById('keyCount2').textContent = keys.size;

      const keysList = document.getElementById('keysList');
      if (keys.size === 0) {
        keysList.innerHTML = '<p class="text-gray-500 text-center py-8">No keys generated yet</p>';
      } else {
        keysList.innerHTML = '';
        [...keys].forEach(key => {
          const item = document.createElement('div');
          item.className = 'key-list-item';
          item.innerHTML = `
            <div class="flex justify-between items-center flex-wrap gap-2">
              <div class="font-mono text-[#ff6600] font-bold text-lg break-all">${key}</div>
              <div class="flex gap-2">
                <button onclick="copyKey('${key}')" class="px-3 py-1 bg-[#ff6600] bg-opacity-20 hover:bg-opacity-30 text-[#ff6600] rounded text-xs transition">
                  üìã Copy
                </button>
                <button onclick="deleteKey('${key}')" class="px-3 py-1 bg-red-500 bg-opacity-20 hover:bg-opacity-30 text-red-500 rounded text-xs transition">
                  üóëÔ∏è Delete
                </button>
              </div>
            </div>
          `;
          keysList.appendChild(item);
        });
      }
    }

    function showNotification(message, type = 'success') {
      const notification = document.createElement('div');
      notification.className = `fixed top-4 right-4 px-6 py-3 rounded-lg text-white font-medium z-50 transition-all ${
        type === 'success' ? 'bg-green-500' : 'bg-red-500'
      }`;
      notification.textContent = message;
      document.body.appendChild(notification);
      
      setTimeout(() => {
        notification.style.opacity = '0';
        setTimeout(() => notification.remove(), 300);
      }, 3000);
    }

    init();
  </script>
</body>
</html>
